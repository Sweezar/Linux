# Операционные системы UNIX/Linux (Базовый).

## Part 1. Установка ОС
**== Задание ==**

### Установить **Ubuntu 20.04 Server LTS** без графического интерфейса. (Используем программу для виртуализации - VirtualBox)
- Установил Ubuntu 20.04 Server LTS
- Узнал версию Ubuntu, выполнив команду \
`cat /etc/issue.`
![part_1](photos/part_1.png)

## Part 2. Создание пользователя
**== Задание ==**

### Создать пользователя, отличного от пользователя, который создавался при установке. Пользователь должен быть добавлен в группу `adm`.

- Создаю нового пользователя командой `useradd`:
	- флаг -m - создание домашней директории,
	- флаг -d - устанавливает `/home/test-user` в качестве домашней директории,
	- флаг -g - добавляет пользователя в группу `adm`.

![part_2.1](photos/part_2.1.png)
- Проверяю, что пользователь добавлен командой `cat /etc/passwd`
![part_2.2](photos/part_2.2.1.png)
- Проверяю группы пользователя командой `groups`
![part_2.1.2](photos/part_2.2.2.png)

## Part 3. Настройка сети ОС

**== Задание ==**

### Задать название машины вида user-1  

- Задаю название машины командой `hostnamectl set-hostname`
![part_3.1.1](photos/part_3.1.1.png)
- Проверяю, что название изменено командой `hostnamectl status`
![part_3.1.2](photos/part_3.1.2.png)

### Установить временную зону, соответствующую вашему текущему местоположению.  

- Ставлю временную зону командой `timedatectl set-timezone`
![part_3.2.1](photos/part_3.2.1.png)
- Проверяю текущую временную зону командой `timedatectl`
![part_3.2.2](photos/part_3.2.2.png)

### Вывести названия сетевых интерфейсов с помощью консольной команды.

- Вывожу название сетевых интерфейсов командой `ls sys/class/net`
![part_3.3](photos/part_3.3.png)
	#### lo (loopback device) – виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. С этим интерфейсом всегда связан адрес 127.0.0.1. У него есть dns-имя – localhost.

### Используя консольную команду получить ip адрес устройства, на котором вы работаете, от DHCP сервера. 

-  Получаю ip адрес командой `ip -br a`
![part_3.4](photos/part_3.4.png)
	#### Протокол динамической конфигурации узлов (Dynamic Host Configuration Protocol, DHCP) — это сетевой протокол, используемый для автоматического получения узлами IP-адресов и сетевой конфигурации с сервера.

### Определить и вывести на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw). 

- Внешний ip-адрес можно узнать через специальные сайты, например командой `curl ifconfig.me`.
	![part_3.5.1](photos/part_3.5.1.png)

- Внутренний ip-адрес командой `ip route` и фильтруем командой `grep default`
	![part_3.5.2](photos/part_3.5.2.png)

### Задать статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (использовать публичный DNS серверы, например 1.1.1.1 или 8.8.8.8).

- Задаю статичные настройки редактированием файла
	![part_3.6.1](photos/part_3.6.1.png)
- Применение настроек
	![part_3.6.2](photos/part_3.6.2.png)

### Перезагрузить виртуальную машину. Убедиться, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте.

- После перезагрузки проверяю ip-адреса
	![part_3.7.1](photos/part_3.7.1.png)
	![part_3.7.2](photos/part_3.7.2.png)
- Проверяю пингом
	![part_3.7.3](photos/part_3.7.3.png)

## Part 4. Обновление ОС

**== Задание ==**

### Обновить системные пакеты до последней на момент выполнения задания версии. 

- Перед обновлением необходимо выполнить команду `apt-get update`, для обновления информации о пакетах.
	![part_4.1](photos/part_4.1.png)
- Теперь обновляем пакеты командой `apt-get dist-upgrade`. При повторном применении появиться сообщение, что обновления отсутствуют.
	![part_4.2](photos/part_4.2.png)

## Part 5. Использование команды **sudo**

**== Задание ==**

### Разрешить пользователю, созданному в [Part 2](#part-2-создание-пользователя), выполнять команду sudo.

- Добавляем пользователя в группу sudo
	![part_5.1](photos/part_5.1.png)
- Меняю hostname OC от имени пользователя
	![part_5.2](photos/part_5.2.png)

	#### Команда sudo предоставляет возможность пользователям выполнять команды от имени суперпользователя root, либо других пользователей

## Part 6. Установка и настройка службы времени

**== Задание ==**

##### Настроить службу автоматической синхронизации времени. 

Вывод время часового пояса, в котором сейчас находишься командой `timedatectl`
	![part_6.1](photos/part_6.1.png)
	![part_6.2](photos/part_6.2.png)

## Part 7. Установка и использование текстовых редакторов 

**== Задание ==**

### Установить текстовые редакторы **VIM** (+ любые два по желанию **NANO**, **MCEDIT**, **JOE** и т.д.) 

- Устанавливаю текстовые редакторы командой `apt-get install`
	![part_7.1.1](photos/part_7.1.1.png)
	![part_7.1.2](photos/part_7.1.2.png)
	![part_7.1.3](photos/part_7.1.3.png)

### Используя каждый из трех выбранных редакторов, создайте файл *test_X.txt*, где X -- название редактора, в котором создан файл. Напишите в нём свой никнейм, закройте файл с сохранением изменений. 

- Создаю и открываю файл на редактирование nano
	![part_7.2.1](photos/part_7.2.1.png)
-	Выхожу сочетанием клавиш ctrl+x, после предлагает сохранить
- Создаю и открываю файл на редактирование vim
	![part_7.2.2](photos/part_7.2.2.png)
- Для выхода ввожу `:wq`
- Создаю и открываю файл на редактирование mcedit
	![part_7.2.3](photos/part_7.2.3.png)
- Выхожу нажав клавишу Esc, перед выходом предлагает сохранить изменения

### Используя каждый из трех выбранных редакторов, откройте файл на редактирование, отредактируйте файл, заменив никнейм на строку "21 School 21", закройте файл без сохранения изменений.

- Выхожу сочетанием клавиш ctrl+x, при предложении сохранить отказываюсь
	![part_7.3.1](photos/part_7.3.1.png)
- Для выхода ввожу `:q!`
	![part_7.3.2](photos/part_7.3.2.png)
- Выхожу нажав клавишу Esc, при предложении сохранить отказываюсь
	![part_7.3.3](photos/part_7.3.3.png)

### Используя каждый из трех выбранных редакторов, отредактируйте файл ещё раз (по аналогии с предыдущим пунктом), а затем освойте функции поиска по содержимому файла (слово) и замены слова на любое другое.

- В vim ввожу :s/{pattern} для поиска
	![part_7.4.1.1](photos/part_7.4.1.1.png)
- :s/{pattern}/{string} для поиска и замены
	![part_7.4.1.2](photos/part_7.4.1.2.png)
- В nano нажимаю сочетание Alt+w для поиска
	![part_7.4.2.1](photos/part_7.4.2.1.png)
- сочетание Alt+r для поиска и замены
	![part_7.4.2.2](photos/part_7.4.2.2.png)
	![part_7.4.2.2](photos/part_7.4.2.3.png)
- В mcedit нажимаю F7 для поиска
	![part_7.4.3.1](photos/part_7.4.3.1.png)
- F4 для поиска и замены
	![part_7.4.3.2](photos/part_7.4.3.2.png)

## Part 8. Установка и базовая настройка сервиса **SSHD**

**== Задание ==**

##### Установить службу SSHd.

- Устанавливаю командой `apt install openssh-server`
	![part_8.1](photos/part_8.1.png)

### Добавить автостарт службы при загрузке системы. 

- Включаю автостарт `systemctl enable ssh`
	![part_8.2.2](photos/part_8.2.1.png)
- Убеждаюсь, что все работает
	![part_8.2.2](photos/part_8.2.2.png)

### Перенастроить службу SSHd на порт 2022.  

- Открываю конфигурационный файл на редактирование и прописываю нужный порт
	![part_8.3](photos/part_8.3.png)

### Используя команду ps, показать наличие процесса sshd. Для этого к команде нужно подобрать ключи.

- `ps -aux | grep sshd`

	![part_8.4](photos/part_8.4.png)
	ps-выводит список текущих процессов на вашем сервере в виде таблицы
	
	a-выбрать все процессы, кроме фоновых;
	
	u-выбрать процессы пользователя.
	
	x-заставляет ps перечислить все процессы, принадлежащие вам

### Перезагрузить систему.
- Вывод команды netstat -tan должен содержать  \
`tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN`  

	![part_8.5](photos/part_8.5.png)

	t- отабражение по протоколу TCP
	
	a-Отображение всех подключений и ожидающих портов.
	
	n- Отображение адресов и номеров портов в числовом формате.
	
	Cтолбцы:
	
	Recv-Q -количество запросов в очередях на приём на данном узле/компьютере
	
	Send-Q -количество запросов в очередях на отправку на данном узле/компьютере
	
	Local Address - адрес и номер локального конца сокета
	
	Foreign Address - адрес и номер порта удаленного порта сокета
	
	State - состояние сокета

	Если в качестве адреса отображается 0.0.0.0 , то это означает - "любой адрес", т. е в соединении могут использоваться все IP-адреса существующие на данном компьютере.

## Part 9. Установка и использование утилит **top**, **htop**

**== Задание ==**

### Установить и запустить утилиты top и htop.  

- Вывод команды **top**:
	![part_9.1.1](photos/part_9.1.1.png)
	- uptime - 31 min
  - количество авторизованных пользователей - 1
  - общую загрузку системы - load average: 0.00
  - общее количество процессов - 104
  - загрузку cpu - 0.0
  - загрузку памяти - 1971.4 total
  - pid процесса занимающего больше всего памяти - 741
		![part_9.1.2](photos/part_9.1.2.png)
  - pid процесса, занимающего больше всего процессорного времени - 741
		![part_9.1.3](photos/part_9.1.3.png)

- Вывод команды **htop**:
	- отсортированному по PID, PERCENT_CPU, PERCENT_MEM, TIME
		![part_9.2.1.1](photos/part_9.2.1.1.png)
		![part_9.2.1.2](photos/part_9.2.1.2.png)
		![part_9.2.1.3](photos/part_9.2.1.3.png)
		![part_9.2.1.4](photos/part_9.2.1.4.png)
  - отфильтрованному для процесса sshd
		![part_9.2.2](photos/part_9.2.2.png)
  - с процессом syslog, найденным, используя поиск 
		![part_9.2.3](photos/part_9.2.3.png)
  - с добавленным выводом hostname, clock и uptime  
		![part_9.2.4](photos/part_9.2.4.png)

## Part 10. Использование утилиты **fdisk**

**== Задание ==**

### Запустить команду fdisk -l.

- название жесткого диска - /dev/sda, 
- его размер - 18.1 GiB,
- количество секторов - 37956608, 
- swap - 1.9 GiB

	![part_10.1.1](photos/part_10.1.1.png)
	![part_10.1.2](photos/part_10.1.2.png)

## Part 11. Использование утилиты **df** 

**== Задание ==**

### Запустить команду df. 

![part_11.1](photos/part_11.1.png)
- размер раздела - 10218772
- размер занятого пространства - 4724872
- размер свободного пространства - 4953228
- процент использования - 49%
- единицы измерения - килобайты

### Запустить команду df -Th.

![part_11.2](photos/part_11.2.png)
- размер раздела - 9.8G
- размер занятого пространства - 4.6G
- размер свободного пространства - 4.8G
- процент использования - 49%
- тип файловой системы - ext4

## Part 12. Использование утилиты **du**

**== Задание ==**

### Запустить команду du.

![part_12.1](photos/part_12.1.png)

### Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)

![part_12.2](photos/part_12.2.png)

### Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *)

![part_12.3](photos/part_12.3.png)

## Part 13. Установка и использование утилиты **ncdu**

**== Задание ==**

### Установить утилиту ncdu.

![part_13.1](photos/part_13.1.png)

### Вывести размер папок /home, /var, /var/log.

![part_13.2.1](photos/part_13.2.1.png)
![part_13.2.2](photos/part_13.2.2.png)
![part_13.2.3](photos/part_13.2.3.png)

## Part 14. Работа с системными журналами

**== Задание ==**

### Открыть для просмотра:
### 1. /var/log/dmesg

	- cat /var/log/dmesg
![part_14.1](photos/part_14.1.png)

### 2. /var/log/syslog

	- cat /var/log/syslog
![part_14.2](photos/part_14.2.png)

### 3. /var/log/auth.log 

	- cat /var/log/auth.log
![part_14.3](photos/part_14.3.png)

- Mar 19 11:22:44 user-2 sudo: pam_unix(sudo:session): session opened for user root by berneick(uid=0)
- Время: 19 марта 11:22:44
- Имя: berneick
- Метод: pam_unix

![part_14.4](photos/part_14.4.png)

## Part 15. Использование планировщика заданий **CRON**

**== Задание ==**

### Используя планировщик заданий, запустите команду uptime через каждые 2 минуты.

- Добавляю задание в файл `crontab -e`
	![part_15.1](photos/part_15.1.png)
	![part_15.2](photos/part_15.2.png)

- список текущих заданий для CRON `crontab -l`

	![part_15.3](photos/part_15.3.png)

### Удалите все задания из планировщика заданий.

- `crontab -r`
- `crontab -l`

	![part_15.4](photos/part_15.4.png)
